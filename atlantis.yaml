version: 3
workflows:
  yc:
    plan:
      steps:
        - init:
            extra_args:
              - -backend-config=access_key=$YC_ACCESS_KEY_ID
              - -backend-config=secret_key=$YC_SECRET_ACCESS_KEY
        - plan
projects:
  - name: devops-diplom
    dir: src/backend/infrastructure
    terraform_version: v1.12.2
    autoplan:
      enabled: true
      when_modified: ["*.tf", "*.tfvars"]
